<% if @user.present? %>
  <% if @user.profile_completion < 100 %>
    <div class="alert alert-warning mt-2">
      Your profile is only <%= @user.profile_completion %>% complete. Please complete your profile for better experience.
    </div>
  <% end %>
<% end %>
<div class="container mt-3">
 <div class="profile-header">
   <% if @user.present? %>
      <% if @user.profile_picture.attached?  %>
        <%= image_tag @user.profile_picture, height:"100", width:"100" %>
      <% else %>
        <img alt="Profile picture placeholder" height="100" src="https://storage.googleapis.com/a1aa/image/jed55Xb2pTXQA6deohLNwe2jvjqoa7HqClQTTdbTedr7VQROB.jpg" width="100"/>
      <% end %>
    <% end %>  
  <h2>
   <%= current_user.full_name %> 
  </h2>

  <div class="profile-status">
    <% if @user.verified? %>
      <p class="text-success"><i class="fas fa-check-circle"></i> Your profile is 100% complete and verified!</p>
    <% else %>
      <p class="text-danger">Your profile is not complete. Please fill the missing information or complete your information.</p>
    <% end %>
  </div>

  <div class="progress col-lg-3 mx-auto fw-bold">
    <div class="progress-bar" role="progressbar" style="width: <%= @user.profile_completion %>%;" aria-valuenow="<%= @user.profile_completion %>" aria-valuemin="0" aria-valuemax="100">
      <%= @user.profile_completion %>% Complete
    </div>
  </div>
 </div>
 <div class="profile-actions">
  <%= link_to edit_profile_picture_path(@user.id) do %>
    <i class="fas fa-plus-circle"></i> Add a profile picture
  <% end %>

  <%= link_to 'Edit personal information', edit_user_registration_path, target: '__blank' %>
 </div>
 <hr/>
 <div class="profile-check">
  <h4>
   Check your profile
  </h4>

  <% if current_user.passport_document.attached? || current_user.identity_card_document.attached? %>
    <p><i class="fas fa-check-circle"></i> You have uploaded your document successfully.</p>
  <% else %>
    <%= link_to verify_document_path do %>
      <i class="fas fa-plus-circle"></i> Verify an ID
    <% end %>
  <% end %>


  <% if current_user.confirmed? %>
    <p><i class="fas fa-check-circle"></i> Your email <strong><%= current_user.email %></strong> is confirmed.</p>
  <% else %>
    <a href="#">
      <i class="fas fa-plus-circle"></i>
      Confirm address <%= current_user.email %>
    </a>
  <% end %>

  <% if current_user.phone_number.present? %>
    <p>
      <i class="fas fa-check-circle"></i> 
      Your contact number <strong><%= current_user.masked_phone_number %></strong> is confirmed.
    </p>
  <% else %>
    <a href="#">
      <i class="fas fa-plus-circle"></i>
      Verify a phone number
    </a>
  <% end %>

 </div>
</div>
<style>
 
.nav-tabs .nav-link.active {
  border-color: #dee2e6 #dee2e6 #fff;
  color: #007bff;
}
.nav-tabs .nav-link {
  border: 1px solid transparent;
  border-top-left-radius: .25rem;
  border-top-right-radius: .25rem;
  color: #6c757d;
}
.profile-header {
  text-align: center;
  margin-top: 20px;
}
.profile-header img {
  width: 100px;
  height: 100px;
  border-radius: 50%;
}
.profile-header h2 {
  font-size: 24px;
  font-weight: bold;
  margin-top: 10px;
}
.profile-header p {
  color: #6c757d;
}
.profile-actions {
  text-align: center;
  margin-top: 20px;
}
.profile-actions a {
  display: block;
  color: #007bff;
  margin: 5px 0;
  text-decoration: none;
}
.profile-actions a:hover {
  text-decoration: underline;
}
.profile-check {
  margin-top: 30px;
}
.profile-check h5 {
  font-size: 18px;
  font-weight: bold;
}
.profile-check a {
  display: block;
  color: #007bff;
  margin: 5px 0;
  text-decoration: none;
}
.profile-check a:hover {
  text-decoration: underline;
}
</style>