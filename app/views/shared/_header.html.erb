<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
  <a href="<%= root_path %>" class="navbar-brand">
    <%= image_tag "new_logo.png", style:"width 150px; height: 50px;", class:"img-fluid", alt: "Logo" %>
  </a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
      <li class="nav-item">
        <a class="nav-link" href="<%= new_traveler_path %>"><small><em>i</em></small> Traveler</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="<%= new_parcel_ad_path %>"><small><em>i</em></small> Send</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="<%= new_buy_for_me_path %>">Buy <small>For Me</small></a>
      </li>
    </ul>
    <form class="d-flex">
      <%= link_to "Browse Posts", search_results_path, class: "btn btn-browse-posts" %>
    </form>
    <div class="d-flex align-items-center">
      <!-- <div class="dropdown">
        <a class="nav-link " href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
          <%= image_tag "flags/us.png", alt: "Img", class: 'country-flag' %>EN
        </a>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
          <li>
            <a class="dropdown-item" href="#">
              <%= image_tag "flags/fr.png", alt: "Img", class: 'country-flag' %>French
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="#">
              <%= image_tag "flags/es.png", alt: "Img", class: 'country-flag' %>Spanish
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="#">
              <%= image_tag "flags/de.png", alt: "Img", class: 'country-flag' %>German
            </a>
          </li>
        </ul>
      </div> -->
      
      <button class="nav-link" data-action="click->language-modal#open">
        <span style="font-size: 0.9rem; color: #3f357a">
          <%= image_tag "flags/us.png", alt: "Img", class: 'country-flag' %> EN
        </span>
      </button>

      <%= link_to how_it_works_path do %>
        <i class="fas fa-question-circle me-2 fs-5" style="color: #353188;"></i>
      <% end %>
      <div class="dropdown">
        <a
            class="nav-link fa fa-user-circle"
            href="#"
            id="userDropdown"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            style="color: #353188; font-size: 20px;"
          >
            <% if current_user.present? %>
              <% if current_user.profile_picture.attached?  %>
                <%= image_tag current_user.profile_picture, class: 'rounded-circle border', alt: 'User Avatar', height:"30", width:"30" %>
              <% end %>
            <% end %> 
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
            <% if user_signed_in? %>
              <li class="dropdown-item-text"><%= current_user.email if current_user.present? %></li>
              <li><%= link_to 'Edit Your Account', user_profile_path, class: 'dropdown-item' %></li>
              <li><hr class="dropdown-divider"></li>
              <li><%= link_to 'Verify you profile', verify_document_path, class: 'dropdown-item' %></li>
              <li><%= link_to 'Messages', chat_rooms_path, class: 'dropdown-item' %></li>
              <li><%= link_to 'History', 'javascript:void(0)', class: 'dropdown-item' %></li>
              <li><%= link_to 'Wallet', 'javascript:void(0)', class: 'dropdown-item' %></li>
              <li><%= link_to 'Help Center', 'javascript:void(0)', class: 'dropdown-item' %></li>
              <li>
                <%= link_to 'javascript:void(0)', class: 'dropdown-item' do %>
                  Get $30 credit <i class="fa-solid fa-gift mx-5"></i>
                <% end %>
                </li>
              <li>
                <%= link_to destroy_user_session_path, method: :delete, class: 'dropdown-item' do %>
                  Log Out <i class="fa-solid fa-right-from-bracket mx-5"></i>
                <% end %>
              </li>
            <% else %>
              <li><%= link_to 'Sign Up', new_user_registration_path, class: 'dropdown-item' %></li>
              <li><%= link_to 'Sign In', new_user_session_path, method: :delete, class: 'dropdown-item' %></li>
            <% end %>
          </ul>
      </div>
    </div>
  </div>
</nav>

<!-- !-- Language Modal -->
<div class="language-modal" id="languageModal" data-controller="language-modal" data-language-modal-target="modal">
  <div class="modal-dialog">
    <button class="close-button" data-action="click->language-modal#close">×</button>
    <div class="modal-content">
      <!-- Tabs -->
      <ul class="nav nav-tabs border-0 px-3">
        <li class="nav-item">
          <a class="nav-link llanguage active" href="#" 
             data-action="click->language-modal#switchTab"
             data-tab="language"
             data-language-modal-target="languageTab">
            Language and region
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link ccurrency" href="#" 
             data-action="click->language-modal#switchTab"
             data-tab="currency"
             data-language-modal-target="currencyTab">
            Currency
          </a>
        </li>
      </ul>

      <div class="modal-body">
        <!-- Translation Toggle -->
        <div id="languageContent" data-language-modal-target="languageContent" style="display: block;">
          <h6 class="mb-3">Suggested languages and regions</h6>
          <div class="row g-2">
            <div class="col-md-4"><div class="language-item">English (UK)</div></div>
            <div class="col-md-4"><div class="language-item">English (US)</div></div>
            <div class="col-md-4"><div class="language-item">हिन्दी (भारत)</div></div>
          </div>
        </div>

        <div id="currencyContent" data-language-modal-target="currencyContent" style="display: none;">
          <h5 class="mb-4">Choose a currency</h5>
          <div class="row g-2">
            <div class="col-md-4"><div class="currency-item">INR – ₹</div></div>
            <div class="col-md-4"><div class="currency-item">USD – $</div></div>
            <div class="col-md-4"><div class="currency-item">EUR – €</div></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

